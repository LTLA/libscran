<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>scran: scran/utils/macros.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">scran
   </div>
   <div id="projectbrief">C++ library for basic single-cell RNA-seq analyses</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bdabb9492db2368b3caf0f4c1df6a160.html">scran</a></li><li class="navelem"><a class="el" href="dir_9b9de28a72409b9bd6e78458203d0167.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">macros.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Set common macros used through <b>libscran</b>.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="macros_8hpp__dep__incl.png" border="0" usemap="#ascran_2utils_2macros_8hppdep" alt=""/></div>
<map name="ascran_2utils_2macros_8hppdep" id="ascran_2utils_2macros_8hppdep">
<area shape="rect" title="Set common macros used through libscran." alt="" coords="1709,5,1863,32"/>
<area shape="rect" href="AggregateAcrossCells_8hpp.html" title="Aggregate expression values across cells." alt="" coords="64,169,252,211"/>
<area shape="rect" href="GroupedSizeFactors_8hpp.html" title="Compute size factors for groups of cells." alt="" coords="206,259,374,300"/>
<area shape="rect" href="scran_8hpp_source.html" title=" " alt="" coords="1987,437,2102,464"/>
<area shape="rect" href="Factory_8hpp_source.html" title=" " alt="" coords="5,87,201,114"/>
<area shape="rect" href="BuildSNNGraph_8hpp.html" title="Build a shared nearest&#45;neighbor graph on the cells." alt="" coords="429,87,663,114"/>
<area shape="rect" href="ClusterSNNGraph_8hpp.html" title="Identify clusters of cells from a shared nearest&#45;neighbor graph." alt="" coords="803,169,961,211"/>
<area shape="rect" href="ClusterKmeans_8hpp.html" title="Identify clusters of cells with k&#45;means." alt="" coords="1301,348,1460,389"/>
<area shape="rect" href="ScoreMarkers_8hpp.html" title="Compute marker scores for each gene in each group of cells." alt="" coords="2224,169,2409,211"/>
<area shape="rect" href="delta__detected_8hpp_source.html" title=" " alt="" coords="919,80,1109,121"/>
<area shape="rect" href="lfc_8hpp_source.html" title=" " alt="" coords="1133,80,1252,121"/>
<area shape="rect" href="BlockedPCA_8hpp.html" title="Compute PCA after blocking on an uninteresting factor." alt="" coords="1431,169,1615,211"/>
<area shape="rect" href="CustomSparseMatrix_8hpp_source.html" title=" " alt="" coords="1671,80,1901,121"/>
<area shape="rect" href="RunPCA_8hpp.html" title="Perform PCA on a gene&#45;by&#45;cell matrix." alt="" coords="1706,169,1866,211"/>
<area shape="rect" href="ScaleByNeighbors_8hpp.html" title="Scale multi&#45;modal embeddings based on their relative variance." alt="" coords="1429,80,1647,121"/>
<area shape="rect" href="ChooseHVGs_8hpp.html" title="Choose highly variable genes for downstream analyses." alt="" coords="1825,259,1982,300"/>
<area shape="rect" href="FitTrendVar_8hpp.html" title="Fit a mean&#45;variance trend to log&#45;count data." alt="" coords="2027,80,2185,121"/>
<area shape="rect" href="ModelGeneVar_8hpp.html" title="Model the per&#45;gene variance from log&#45;count data." alt="" coords="1991,169,2149,211"/>
<area shape="rect" href="CenterSizeFactors_8hpp.html" title="Center size factors prior to normalization." alt="" coords="687,80,845,121"/>
<area shape="rect" href="LogNormCounts_8hpp.html" title="Compute log&#45;normalized expression values." alt="" coords="1157,169,1303,211"/>
<area shape="rect" href="MedianSizeFactors_8hpp.html" title="Compute median&#45;based size factors." alt="" coords="328,169,489,211"/>
<area shape="rect" href="FilterCells_8hpp.html" title="Filter out low&#45;quality cells from the count matrix." alt="" coords="2111,348,2253,389"/>
<area shape="rect" href="IsOutlier_8hpp.html" title="Define outliers using a simple MAD&#45;based approach." alt="" coords="2938,169,3079,211"/>
<area shape="rect" href="PerCellAdtQcFilters_8hpp.html" title="Create filters to identify low&#45;quality cells from ADT data." alt="" coords="2658,348,2823,389"/>
<area shape="rect" href="PerCellRnaQcFilters_8hpp.html" title="Create filters to identify low&#45;quality cells from RNA metrics." alt="" coords="2535,259,2703,300"/>
<area shape="rect" href="PerCellAdtQcMetrics_8hpp.html" title="Compute per&#45;cell quality control metrics from an ADT count matrix." alt="" coords="2779,259,2951,300"/>
<area shape="rect" href="PerCellRnaQcMetrics_8hpp_source.html" title=" " alt="" coords="2587,169,2761,211"/>
<area shape="rect" href="average__vectors_8hpp.html" title="Average parallel elements across vectors." alt="" coords="3051,348,3183,389"/>
<area shape="rect" href="subset__vector_8hpp_source.html" title=" " alt="" coords="3157,259,3282,300"/>
<area shape="rect" href="vector__to__pointers_8hpp.html" title="Create a vector of pointers from a vector of vectors." alt="" coords="2386,80,2509,121"/>
<area shape="rect" href="MultiBatchPCA_8hpp.html" title="Compute PCA after adjusting for differences between batch sizes." alt="" coords="1560,348,1759,389"/>
</map>
</div>
</div>
<p><a href="macros_8hpp_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Set common macros used through <b>libscran</b>. </p>
<p >The <code>SCRAN_CUSTOM_PARALLEL</code> macro can be set to a function that specifies a custom parallelization scheme. This function should be a template that accept three arguments:</p>
<ul>
<li><code>njobs</code>, an integer specifying the number of jobs.</li>
<li><code>fun</code>, a lambda that accepts two arguments, <code>start</code> and <code>end</code>.</li>
<li><code>nthreads</code>, an integer specifying the number of threads to use.</li>
</ul>
<p >The function should split <code>[0, njobs)</code> into any number of contiguous, non-overlapping intervals, and call <code>fun</code> on each interval, possibly in different threads. The details of the splitting and evaluation are left to the discretion of the developer defining the macro. The function should only return once all evaluations of <code>fun</code> are complete.</p>
<p >If <code>SCRAN_CUSTOM_PARALLEL</code> is set, the following macros are also set (if they are not already defined):</p>
<ul>
<li><code>TATAMI_CUSTOM_PARALLEL</code>, from the <a href="https://ltla.github.io/tatami"><b>tatami</b></a> library.</li>
<li><code>KMEANS_CUSTOM_PARALLEL</code>, from the <a href="https://ltla.github.io/CppKmeans"><b>kmeans</b></a> library.</li>
<li><code>IRLBA_CUSTOM_PARALLEL</code>, from the <a href="https://ltla.github.io/CppIrlba"><b>irlba</b></a> library.</li>
</ul>
<p >This ensures that any custom parallelization scheme is propagated to all of <b>libscran</b>'s dependencies. If these libraries are used outside of <b>libscran</b>, some care is required to ensure that the macros are consistently defined through the client library/application; otherwise, developers may observe ODR compilation errors. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
